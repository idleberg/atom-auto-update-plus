"use strict";var e=require("atom"),t=require("path"),r=require("child_process"),n=require("fs"),o=require("os"),i=require("assert"),a=require("events"),s=require("buffer"),c=require("stream");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=u(t),d=u(r),p=u(n),f=u(o),m=u(i),h=u(a),E=u(s),g=u(c);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function v(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function I(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function y(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}var R="auto-update-plus",w="\n  background-color: indianred;\n  border-radius: 2px;\n  color: white;\n  line-height: 1.5;\n  padding: 1px 4px;\n  text-shadow: 0 1px 0px rgba(0, 0, 0, 0.2);\n";function S(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];(null===atom||void 0===atom?void 0:atom.inDevMode())&&(r.unshift("%c"+R+"%c",w,""),(t=global.console)[e].apply(t,r))}var b=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];S.apply(void 0,y(["error"],e))},T=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];S.apply(void 0,y(["log"],e))},O=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];S.apply(void 0,y(["warn"],e))},L={includedPackages:{title:"Included Packages",description:"Comma-delimited list of packages to be included from automatic updates. Don't mix with *Excluded Packages* – included packages take precedence over excluded packages.",type:"array",default:[],order:1},excludedPackages:{title:"Excluded Packages",description:"Comma-delimited list of packages to be excluded from automatic updates. Don't mix with *Included Packages* – included packages take precedence over excluded packages.",type:"array",default:[],order:2},versionRange:{title:"Version Range",description:"Specify a [SemVer](https://semver.org/) range that update automatically",type:"array",default:["major","minor","patch"],enum:[{value:["patch"],description:"Patch only"},{value:["minor","patch"],description:"Minor or below"},{value:["major","minor","patch"],description:"Major or below (all versions)"},{value:["major","minor"],description:"⚠️ Minor or above"},{value:["major"],description:"⚠️ Major only"}],order:2},intervalMinutes:{title:"Update Interval",description:"Set the default update interval, in minutes",type:"integer",minimum:15,maximum:10080,default:360,order:3},deferInitialization:{title:"Defer Initialization",description:"Set the default timeout for update initialization, in seconds",type:"integer",minimum:5,maximum:120,default:10,order:3},hideUpdateStatusView:{title:"Hide Update Status",description:"Hides Atom's default update indicator in the status bar",type:"boolean",default:!1,order:4},notifications:{title:"Notifications",type:"object",order:5,properties:{notifyOnUpdate:{title:"Notify on Update",description:"Enable to show notifications when packages have been updated",type:"boolean",default:!0,order:1},dismissNotification:{title:"Dismiss Notification",description:"Automatically dismiss the update notification after 5 seconds",type:"boolean",default:!0,order:2},maximumPackageDetail:{title:"Maximum Package Detail",description:"Specify the maximum number of package names displayed in the notification (minimum is 3)",type:"integer",default:5,minimum:3,maximum:20,order:3}}}};function N(e){return void 0===e&&(e=""),(null==e?void 0:e.length)?atom.config.get(R+"."+e):atom.config.get(""+R)}function A(e,t){if(atom.config.get(R+"."+t))O("Setting '"+t+"' already exists, skipping migration");else{try{atom.config.set(R+"."+t,atom.config.get(R+"."+e))}catch(e){return console.log(e),void atom.notifications.addWarning("Failed to migrate configuration, see console for details")}O("Setting '"+e+"' migrated successfully to '"+t+"'"),atom.config.unset(R+"."+e)}}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function P(e){var t={exports:{}};return e(t,t.exports),t.exports}var C=D;function G(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r)return!0;if(-1!==(r=r.split(";")).indexOf(""))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}(t,r)}function D(e,t,r){p.default.stat(e,(function(n,o){r(n,!n&&G(o,e,t))}))}D.sync=function(e,t){return G(p.default.statSync(e),e,t)};var M,k=j;function j(e,t,r){p.default.stat(e,(function(e,n){r(e,!e&&U(n,t))}))}function U(e,t){return e.isFile()&&function(e,t){var r=e.mode,n=e.uid,o=e.gid,i=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),a=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),s=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),l=s|c;return r&u||r&c&&o===a||r&s&&n===i||r&l&&0===i}(e,t)}j.sync=function(e,t){return U(p.default.statSync(e),t)},M="win32"===process.platform||x.TESTING_WINDOWS?C:k;var F=$;function $(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(r,n){$(e,t||{},(function(e,t){e?n(e):r(t)}))}))}M(e,t||{},(function(e,n){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,n=!1),r(e,n)}))}$.sync=function(e,t){try{return M.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}};const B="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,_=B?";":":",X=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),H=(e,t)=>{const r=t.colon||_,n=e.match(/\//)||B&&e.match(/\\/)?[""]:[...B?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],o=B?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",i=B?o.split(r):[""];return B&&-1!==e.indexOf(".")&&""!==i[0]&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:o}},V=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});const{pathEnv:n,pathExt:o,pathExtExe:i}=H(e,t),a=[],s=r=>new Promise(((o,i)=>{if(r===n.length)return t.all&&a.length?o(a):i(X(e));const s=n[r],u=/^".*"$/.test(s)?s.slice(1,-1):s,d=l.default.join(u,e),p=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;o(c(p,r,0))})),c=(e,r,n)=>new Promise(((u,l)=>{if(n===o.length)return u(s(r+1));const d=o[n];F(e+d,{pathExt:i},((o,i)=>{if(!o&&i){if(!t.all)return u(e+d);a.push(e+d)}return u(c(e,r,n+1))}))}));return r?s(0).then((e=>r(null,e)),r):s(0)};var q=V;V.sync=(e,t)=>{t=t||{};const{pathEnv:r,pathExt:n,pathExtExe:o}=H(e,t),i=[];for(let a=0;a<r.length;a++){const s=r[a],c=/^".*"$/.test(s)?s.slice(1,-1):s,u=l.default.join(c,e),d=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;for(let e=0;e<n.length;e++){const r=d+n[e];try{if(F.sync(r,{pathExt:o})){if(!t.all)return r;i.push(r)}}catch(e){}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw X(e)};const K=(e={})=>{const t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find((e=>"PATH"===e.toUpperCase()))||"Path"};var W=K,z=K;function Y(e,t){const r=e.options.env||process.env,n=process.cwd(),o=null!=e.options.cwd,i=o&&void 0!==process.chdir&&!process.chdir.disabled;if(i)try{process.chdir(e.options.cwd)}catch(e){}let a;try{a=q.sync(e.command,{path:r[W({env:r})],pathExt:t?l.default.delimiter:void 0})}catch(e){}finally{i&&process.chdir(n)}return a&&(a=l.default.resolve(o?e.options.cwd:"",a)),a}W.default=z;var Z=function(e){return Y(e)||Y(e,!0)};const Q=/([()\][%!^"`<>&|;, *?])/g;var J={command:function(e){return e=e.replace(Q,"^$1")},argument:function(e,t){return e=(e=`"${e=(e=(e=`${e}`).replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1")}"`).replace(Q,"^$1"),t&&(e=e.replace(Q,"^$1")),e}},ee=/^#!(.*)/;var te=function(e){const t=Buffer.alloc(150);let r;try{r=p.default.openSync(e,"r"),p.default.readSync(r,t,0,150,0),p.default.closeSync(r)}catch(e){}return((e="")=>{const t=e.match(ee);if(!t)return null;const[r,n]=t[0].replace(/#! ?/,"").split(" "),o=r.split("/").pop();return"env"===o?n:n?`${o} ${n}`:o})(t.toString())};const re="win32"===process.platform,ne=/\.(?:com|exe)$/i,oe=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function ie(e){if(!re)return e;const t=function(e){e.file=Z(e);const t=e.file&&te(e.file);return t?(e.args.unshift(e.file),e.command=t,Z(e)):e.file}(e),r=!ne.test(t);if(e.options.forceShell||r){const r=oe.test(t);e.command=l.default.normalize(e.command),e.command=J.command(e.command),e.args=e.args.map((e=>J.argument(e,r)));const n=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${n}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}var ae=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);const n={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell?n:ie(n)};const se="win32"===process.platform;function ce(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function ue(e,t){return se&&1===e&&!t.file?ce(t.original,"spawn"):null}var le={hookChildProcess:function(e,t){if(!se)return;const r=e.emit;e.emit=function(n,o){if("exit"===n){const n=ue(o,t);if(n)return r.call(e,"error",n)}return r.apply(e,arguments)}},verifyENOENT:ue,verifyENOENTSync:function(e,t){return se&&1===e&&!t.file?ce(t.original,"spawnSync"):null},notFoundError:ce};function de(e,t,r){const n=ae(e,t,r),o=d.default.spawn(n.command,n.args,n.options);return le.hookChildProcess(o,n),o}var pe=de,fe=de,me=function(e,t,r){const n=ae(e,t,r),o=d.default.spawnSync(n.command,n.args,n.options);return o.error=o.error||le.verifyENOENTSync(o.status,n),o},he=ae,Ee=le;pe.spawn=fe,pe.sync=me,pe._parse=he,pe._enoent=Ee;var ge=P((function(e){const t=e=>{let t;e={cwd:process.cwd(),path:process.env[W()],execPath:process.execPath,...e};let r=l.default.resolve(e.cwd);const n=[];for(;t!==r;)n.push(l.default.join(r,"node_modules/.bin")),t=r,r=l.default.resolve(r,"..");const o=l.default.resolve(e.cwd,e.execPath,"..");return n.push(o),n.concat(e.path).join(l.default.delimiter)};e.exports=t,e.exports.default=t,e.exports.env=t=>{const r={...(t={env:process.env,...t}).env},n=W({env:r});return t.path=r[n],r[n]=e.exports(t),r}}));const ve=(e,t)=>{for(const r of Reflect.ownKeys(t))Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e};var Ie=ve,ye=ve;Ie.default=ye;const Re=new WeakMap,we=(e,t={})=>{if("function"!=typeof e)throw new TypeError("Expected a function");let r,n=0;const o=e.displayName||e.name||"<anonymous>",i=function(...a){if(Re.set(i,++n),1===n)r=e.apply(this,a),e=null;else if(!0===t.throw)throw new Error(`Function \`${o}\` can only be called once`);return r};return Ie(i,e),Re.set(i,n),i};var Se=we,be=we;Se.default=be,Se.callCount=e=>{if(!Re.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return Re.get(e)};var Te=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SIGNALS=void 0;t.SIGNALS=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}]})),Oe=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SIGRTMAX=t.getRealtimeSignals=void 0;t.getRealtimeSignals=function(){const e=o-n+1;return Array.from({length:e},r)};const r=function(e,t){return{name:`SIGRT${t+1}`,number:n+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},n=34,o=64;t.SIGRTMAX=o})),Le=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSignals=void 0;t.getSignals=function(){const e=(0,Oe.getRealtimeSignals)();return[...Te.SIGNALS,...e].map(r)};const r=function({name:e,number:t,description:r,action:n,forced:o=!1,standard:i}){const{signals:{[e]:a}}=f.default.constants,s=void 0!==a;return{name:e,number:s?a:t,description:r,supported:s,action:n,forced:o,standard:i}}})),Ne=P((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.signalsByNumber=t.signalsByName=void 0;const r=function(e,{name:t,number:r,description:n,supported:o,action:i,forced:a,standard:s}){return{...e,[t]:{name:t,number:r,description:n,supported:o,action:i,forced:a,standard:s}}},n=(0,Le.getSignals)().reduce(r,{});t.signalsByName=n;const o=function(e,t){const r=i(e,t);if(void 0===r)return{};const{name:n,description:o,supported:a,action:s,forced:c,standard:u}=r;return{[e]:{name:n,number:e,description:o,supported:a,action:s,forced:c,standard:u}}},i=function(e,t){const r=t.find((({name:t})=>f.default.constants.signals[t]===e));return void 0!==r?r:t.find((t=>t.number===e))},a=function(){const e=(0,Le.getSignals)(),t=Oe.SIGRTMAX+1,r=Array.from({length:t},((t,r)=>o(r,e)));return Object.assign({},...r)}();t.signalsByNumber=a}));const{signalsByName:Ae}=Ne;var xe=({stdout:e,stderr:t,all:r,error:n,signal:o,exitCode:i,command:a,timedOut:s,isCanceled:c,killed:u,parsed:{options:{timeout:l}}})=>{i=null===i?void 0:i;const d=void 0===(o=null===o?void 0:o)?void 0:Ae[o].description,p=`Command ${(({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:o,exitCode:i,isCanceled:a})=>e?`timed out after ${t} milliseconds`:a?"was canceled":void 0!==r?`failed with ${r}`:void 0!==n?`was killed with ${n} (${o})`:void 0!==i?`failed with exit code ${i}`:"failed")({timedOut:s,timeout:l,errorCode:n&&n.code,signal:o,signalDescription:d,exitCode:i,isCanceled:c})}: ${a}`,f="[object Error]"===Object.prototype.toString.call(n),m=f?`${p}\n${n.message}`:p,h=[m,t,e].filter(Boolean).join("\n");return f?(n.originalMessage=n.message,n.message=h):n=new Error(h),n.shortMessage=m,n.command=a,n.exitCode=i,n.signal=o,n.signalDescription=d,n.stdout=e,n.stderr=t,void 0!==r&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=Boolean(s),n.isCanceled=c,n.killed=u&&!s,n};const Pe=["stdin","stdout","stderr"],Ce=e=>{if(!e)return;const{stdio:t}=e;if(void 0===t)return Pe.map((t=>e[t]));if((e=>Pe.some((t=>void 0!==e[t])))(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Pe.map((e=>`\`${e}\``)).join(", ")}`);if("string"==typeof t)return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);const r=Math.max(t.length,Pe.length);return Array.from({length:r},((e,r)=>t[r]))};var Ge=Ce;Ge.node=e=>{const t=Ce(e);return"ipc"===t?"ipc":void 0===t||"string"==typeof t?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]};var De,Me=P((function(e){e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")})),ke=/^win/i.test(process.platform),je=h.default;"function"!=typeof je&&(je=je.EventEmitter),process.__signal_exit_emitter__?De=process.__signal_exit_emitter__:((De=process.__signal_exit_emitter__=new je).count=0,De.emitted={}),De.infinite||(De.setMaxListeners(1/0),De.infinite=!0);var Ue=function(e,t){m.default.equal(typeof e,"function","a callback must be provided for exit handler"),!1===He&&Ve();var r="exit";t&&t.alwaysLast&&(r="afterexit");return De.on(r,e),function(){De.removeListener(r,e),0===De.listeners("exit").length&&0===De.listeners("afterexit").length&&$e()}},Fe=$e;function $e(){He&&(He=!1,Me.forEach((function(e){try{process.removeListener(e,_e[e])}catch(e){}})),process.emit=We,process.reallyExit=qe,De.count-=1)}function Be(e,t,r){De.emitted[e]||(De.emitted[e]=!0,De.emit(e,t,r))}var _e={};Me.forEach((function(e){_e[e]=function(){process.listeners(e).length===De.count&&($e(),Be("exit",null,e),Be("afterexit",null,e),ke&&"SIGHUP"===e&&(e="SIGINT"),process.kill(process.pid,e))}}));var Xe=Ve,He=!1;function Ve(){He||(He=!0,De.count+=1,Me=Me.filter((function(e){try{return process.on(e,_e[e]),!0}catch(e){return!1}})),process.emit=ze,process.reallyExit=Ke)}var qe=process.reallyExit;function Ke(e){process.exitCode=e||0,Be("exit",process.exitCode,null),Be("afterexit",process.exitCode,null),qe.call(process,process.exitCode)}var We=process.emit;function ze(e,t){if("exit"===e){void 0!==t&&(process.exitCode=t);var r=We.apply(this,arguments);return Be("exit",process.exitCode,null),Be("afterexit",process.exitCode,null),r}return We.apply(this,arguments)}Ue.unload=Fe,Ue.signals=function(){return Me},Ue.load=Xe;const Ye=(e,t,r,n)=>{if(!Ze(t,r,n))return;const o=Je(r),i=setTimeout((()=>{e("SIGKILL")}),o);i.unref&&i.unref()},Ze=(e,{forceKillAfterTimeout:t},r)=>Qe(e)&&!1!==t&&r,Qe=e=>e===f.default.constants.signals.SIGTERM||"string"==typeof e&&"SIGTERM"===e.toUpperCase(),Je=({forceKillAfterTimeout:e=!0})=>{if(!0===e)return 5e3;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e};var et={spawnedKill:(e,t="SIGTERM",r={})=>{const n=e(t);return Ye(e,t,r,n),n},spawnedCancel:(e,t)=>{e.kill()&&(t.isCanceled=!0)},setupTimeout:(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(0===t||void 0===t)return n;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);let o;const i=new Promise(((n,i)=>{o=setTimeout((()=>{((e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))})(e,r,i)}),t)})),a=n.finally((()=>{clearTimeout(o)}));return Promise.race([i,a])},setExitHandler:async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;const o=Ue((()=>{e.kill()}));return n.finally((()=>{o()}))}};const tt=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;tt.writable=e=>tt(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,tt.readable=e=>tt(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,tt.duplex=e=>tt.writable(e)&&tt.readable(e),tt.transform=e=>tt.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState;var rt=tt,nt=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),o=e[e.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),n}};var ot=nt(at),it=nt(st);function at(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function st(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}at.proto=at((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return at(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return st(this)},configurable:!0})})),ot.strict=it;var ct=function(){},ut=function(e,t,r){if("function"==typeof t)return ut(e,null,t);t||(t={}),r=ot(r||ct);var n=e._writableState,o=e._readableState,i=t.readable||!1!==t.readable&&e.readable,a=t.writable||!1!==t.writable&&e.writable,s=!1,c=function(){e.writable||u()},u=function(){a=!1,i||r.call(e)},l=function(){i=!1,a||r.call(e)},d=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},p=function(t){r.call(e,t)},f=function(){process.nextTick(m)},m=function(){if(!s)return(!i||o&&o.ended&&!o.destroyed)&&(!a||n&&n.ended&&!n.destroyed)?void 0:r.call(e,new Error("premature close"))},h=function(){e.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?a&&!n&&(e.on("end",c),e.on("close",c)):(e.on("complete",u),e.on("abort",f),e.req?h():e.on("request",h)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",d),e.on("end",l),e.on("finish",u),!1!==t.error&&e.on("error",p),e.on("close",f),function(){s=!0,e.removeListener("complete",u),e.removeListener("abort",f),e.removeListener("request",h),e.req&&e.req.removeListener("finish",u),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",u),e.removeListener("exit",d),e.removeListener("end",l),e.removeListener("error",p),e.removeListener("close",f)}},lt=ut,dt=function(){},pt=/^v?\.0/.test(process.version),ft=function(e){return"function"==typeof e},mt=function(e,t,r,n){n=ot(n);var o=!1;e.on("close",(function(){o=!0})),lt(e,{readable:t,writable:r},(function(e){if(e)return n(e);o=!0,n()}));var i=!1;return function(t){if(!o&&!i)return i=!0,function(e){return!!pt&&!!p.default&&(e instanceof(p.default.ReadStream||dt)||e instanceof(p.default.WriteStream||dt))&&ft(e.close)}(e)?e.close(dt):function(e){return e.setHeader&&ft(e.abort)}(e)?e.abort():ft(e.destroy)?e.destroy():void n(t||new Error("stream was destroyed"))}},ht=function(e){e()},Et=function(e,t){return e.pipe(t)},gt=function(){var e,t=Array.prototype.slice.call(arguments),r=ft(t[t.length-1]||dt)&&t.pop()||dt;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map((function(o,i){var a=i<t.length-1;return mt(o,a,i>0,(function(t){e||(e=t),t&&n.forEach(ht),a||(n.forEach(ht),r(e))}))}));return t.reduce(Et)};const{PassThrough:vt}=g.default;const{constants:It}=E.default;class yt extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function Rt(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t={maxBuffer:1/0,...t};const{maxBuffer:r}=t;let n;return await new Promise(((o,i)=>{const a=e=>{e&&n.getBufferedLength()<=It.MAX_LENGTH&&(e.bufferedData=n.getBufferedValue()),i(e)};n=gt(e,(e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const n="buffer"===r;let o=!1;t?o=!(r||n):r=r||"utf8",n&&(r=null);const i=new vt({objectMode:o});r&&i.setEncoding(r);let a=0;const s=[];return i.on("data",(e=>{s.push(e),o?a=s.length:a+=e.length})),i.getBufferedValue=()=>t?s:n?Buffer.concat(s,a):s.join(""),i.getBufferedLength=()=>a,i})(t),(e=>{e?a(e):o()})),n.on("data",(()=>{n.getBufferedLength()>r&&a(new yt)}))})),n.getBufferedValue()}var wt=Rt,St=Rt,bt=yt;wt.default=St,wt.buffer=(e,t)=>Rt(e,{...t,encoding:"buffer"}),wt.array=(e,t)=>Rt(e,{...t,array:!0}),wt.MaxBufferError=bt;const{PassThrough:Tt}=g.default;const Ot=async(e,t)=>{if(e){e.destroy();try{return await t}catch(e){return e.bufferedData}}},Lt=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(e&&r)return t?wt(e,{encoding:t,maxBuffer:n}):wt.buffer(e,{maxBuffer:n})};var Nt={handleInput:(e,t)=>{void 0!==t&&void 0!==e.stdin&&(rt(t)?t.pipe(e.stdin):e.stdin.end(t))},makeAllStream:(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;const r=function(){var e=[],t=new Tt({objectMode:!0});return t.setMaxListeners(0),t.add=r,t.isEmpty=n,t.on("unpipe",o),Array.prototype.slice.call(arguments).forEach(r),t;function r(n){return Array.isArray(n)?(n.forEach(r),this):(e.push(n),n.once("end",o.bind(null,n)),n.once("error",t.emit.bind(t,"error")),n.pipe(t,{end:!1}),this)}function n(){return 0==e.length}function o(r){!(e=e.filter((function(e){return e!==r}))).length&&t.readable&&t.end()}}();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},getSpawnedResult:async({stdout:e,stderr:t,all:r},{encoding:n,buffer:o,maxBuffer:i},a)=>{const s=Lt(e,{encoding:n,buffer:o,maxBuffer:i}),c=Lt(t,{encoding:n,buffer:o,maxBuffer:i}),u=Lt(r,{encoding:n,buffer:o,maxBuffer:2*i});try{return await Promise.all([a,s,c,u])}catch(n){return Promise.all([{error:n,signal:n.signal,timedOut:n.timedOut},Ot(e,s),Ot(t,c),Ot(r,u)])}},validateInputSync:({input:e})=>{if(rt(e))throw new TypeError("The `input` option cannot be a stream in sync mode")}};const At=(async()=>{})().constructor.prototype,xt=["then","catch","finally"].map((e=>[e,Reflect.getOwnPropertyDescriptor(At,e)]));var Pt={mergePromise:(e,t)=>{for(const[r,n]of xt){const o="function"==typeof t?(...e)=>Reflect.apply(n.value,t(),e):n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:o})}return e},getSpawnedPromise:e=>new Promise(((t,r)=>{e.on("exit",((e,r)=>{t({exitCode:e,signal:r})})),e.on("error",(e=>{r(e)})),e.stdin&&e.stdin.on("error",(e=>{r(e)}))}))};const Ct=/ +/g;var Gt={joinCommand:(e,t=[])=>Array.isArray(t)?[e,...t].join(" "):e,parseCommand:e=>{const t=[];for(const r of e.trim().split(Ct)){const e=t[t.length-1];e&&e.endsWith("\\")?t[t.length-1]=`${e.slice(0,-1)} ${r}`:t.push(r)}return t}};const{spawnedKill:Dt,spawnedCancel:Mt,setupTimeout:kt,setExitHandler:jt}=et,{handleInput:Ut,getSpawnedResult:Ft,makeAllStream:$t,validateInputSync:Bt}=Nt,{mergePromise:_t,getSpawnedPromise:Xt}=Pt,{joinCommand:Ht,parseCommand:Vt}=Gt,qt=(e,t,r={})=>{const n=pe._parse(e,t,r);return e=n.command,t=n.args,(r={maxBuffer:1e8,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:(r=n.options).cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...r}).env=(({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:o})=>{const i=t?{...process.env,...e}:e;return r?ge.env({env:i,cwd:n,execPath:o}):i})(r),r.stdio=Ge(r),"win32"===process.platform&&"cmd"===l.default.basename(e,".exe")&&t.unshift("/q"),{file:e,args:t,options:r,parsed:n}},Kt=(e,t,r)=>"string"==typeof t||Buffer.isBuffer(t)?e.stripFinalNewline?(e=>{const t="string"==typeof e?"\n":"\n".charCodeAt(),r="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===r&&(e=e.slice(0,e.length-1)),e})(t):t:void 0===r?void 0:"",Wt=(e,t,r)=>{const n=qt(e,t,r),o=Ht(e,t);let i;try{i=d.default.spawn(n.file,n.args,n.options)}catch(e){const t=new d.default.ChildProcess,r=Promise.reject(xe({error:e,stdout:"",stderr:"",all:"",command:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return _t(t,r)}const a=Xt(i),s=kt(i,n.options,a),c=jt(i,n.options,s),u={isCanceled:!1};i.kill=Dt.bind(null,i.kill.bind(i)),i.cancel=Mt.bind(null,i,u);const l=Se((async()=>{const[{error:e,exitCode:t,signal:r,timedOut:a},s,l,d]=await Ft(i,n.options,c),p=Kt(n.options,s),f=Kt(n.options,l),m=Kt(n.options,d);if(e||0!==t||null!==r){const s=xe({error:e,exitCode:t,signal:r,stdout:p,stderr:f,all:m,command:o,parsed:n,timedOut:a,isCanceled:u.isCanceled,killed:i.killed});if(!n.options.reject)return s;throw s}return{command:o,exitCode:0,stdout:p,stderr:f,all:m,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}));return pe._enoent.hookChildProcess(i,n.parsed),Ut(i,n.options.input),i.all=$t(i,n.options),_t(i,l)};var zt=Wt;zt.sync=(e,t,r)=>{const n=qt(e,t,r),o=Ht(e,t);let i;Bt(n.options);try{i=d.default.spawnSync(n.file,n.args,n.options)}catch(e){throw xe({error:e,stdout:"",stderr:"",all:"",command:o,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}const a=Kt(n.options,i.stdout,i.error),s=Kt(n.options,i.stderr,i.error);if(i.error||0!==i.status||null!==i.signal){const e=xe({stdout:a,stderr:s,error:i.error,signal:i.signal,exitCode:i.status,command:o,parsed:n,timedOut:i.error&&"ETIMEDOUT"===i.error.code,isCanceled:!1,killed:null!==i.signal});if(!n.options.reject)return e;throw e}return{command:o,exitCode:0,stdout:a,stderr:s,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}},zt.command=(e,t)=>{const[r,...n]=Vt(e);return Wt(r,n,t)},zt.commandSync=(e,t)=>{const[r,...n]=Vt(e);return Wt.sync(r,n,t)},zt.node=(e,t,r={})=>{t&&!Array.isArray(t)&&"object"==typeof t&&(r=t,t=[]);const n=Ge.node(r),o=process.execArgv.filter((e=>!e.startsWith("--inspect"))),{nodePath:i=process.execPath,nodeOptions:a=o}=r;return Wt(i,[...a,e,...Array.isArray(t)?t:[]],{...r,stdin:void 0,stdout:void 0,stderr:void 0,stdio:n,shell:!1})};var Yt=P((function(e,t){var r;t=e.exports=d,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],i=t.src=[],a=t.tokens={},s=0;function c(e){a[e]=s++}c("NUMERICIDENTIFIER"),i[a.NUMERICIDENTIFIER]="0|[1-9]\\d*",c("NUMERICIDENTIFIERLOOSE"),i[a.NUMERICIDENTIFIERLOOSE]="[0-9]+",c("NONNUMERICIDENTIFIER"),i[a.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*",c("MAINVERSION"),i[a.MAINVERSION]="("+i[a.NUMERICIDENTIFIER]+")\\.("+i[a.NUMERICIDENTIFIER]+")\\.("+i[a.NUMERICIDENTIFIER]+")",c("MAINVERSIONLOOSE"),i[a.MAINVERSIONLOOSE]="("+i[a.NUMERICIDENTIFIERLOOSE]+")\\.("+i[a.NUMERICIDENTIFIERLOOSE]+")\\.("+i[a.NUMERICIDENTIFIERLOOSE]+")",c("PRERELEASEIDENTIFIER"),i[a.PRERELEASEIDENTIFIER]="(?:"+i[a.NUMERICIDENTIFIER]+"|"+i[a.NONNUMERICIDENTIFIER]+")",c("PRERELEASEIDENTIFIERLOOSE"),i[a.PRERELEASEIDENTIFIERLOOSE]="(?:"+i[a.NUMERICIDENTIFIERLOOSE]+"|"+i[a.NONNUMERICIDENTIFIER]+")",c("PRERELEASE"),i[a.PRERELEASE]="(?:-("+i[a.PRERELEASEIDENTIFIER]+"(?:\\."+i[a.PRERELEASEIDENTIFIER]+")*))",c("PRERELEASELOOSE"),i[a.PRERELEASELOOSE]="(?:-?("+i[a.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+i[a.PRERELEASEIDENTIFIERLOOSE]+")*))",c("BUILDIDENTIFIER"),i[a.BUILDIDENTIFIER]="[0-9A-Za-z-]+",c("BUILD"),i[a.BUILD]="(?:\\+("+i[a.BUILDIDENTIFIER]+"(?:\\."+i[a.BUILDIDENTIFIER]+")*))",c("FULL"),c("FULLPLAIN"),i[a.FULLPLAIN]="v?"+i[a.MAINVERSION]+i[a.PRERELEASE]+"?"+i[a.BUILD]+"?",i[a.FULL]="^"+i[a.FULLPLAIN]+"$",c("LOOSEPLAIN"),i[a.LOOSEPLAIN]="[v=\\s]*"+i[a.MAINVERSIONLOOSE]+i[a.PRERELEASELOOSE]+"?"+i[a.BUILD]+"?",c("LOOSE"),i[a.LOOSE]="^"+i[a.LOOSEPLAIN]+"$",c("GTLT"),i[a.GTLT]="((?:<|>)?=?)",c("XRANGEIDENTIFIERLOOSE"),i[a.XRANGEIDENTIFIERLOOSE]=i[a.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",c("XRANGEIDENTIFIER"),i[a.XRANGEIDENTIFIER]=i[a.NUMERICIDENTIFIER]+"|x|X|\\*",c("XRANGEPLAIN"),i[a.XRANGEPLAIN]="[v=\\s]*("+i[a.XRANGEIDENTIFIER]+")(?:\\.("+i[a.XRANGEIDENTIFIER]+")(?:\\.("+i[a.XRANGEIDENTIFIER]+")(?:"+i[a.PRERELEASE]+")?"+i[a.BUILD]+"?)?)?",c("XRANGEPLAINLOOSE"),i[a.XRANGEPLAINLOOSE]="[v=\\s]*("+i[a.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+i[a.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+i[a.XRANGEIDENTIFIERLOOSE]+")(?:"+i[a.PRERELEASELOOSE]+")?"+i[a.BUILD]+"?)?)?",c("XRANGE"),i[a.XRANGE]="^"+i[a.GTLT]+"\\s*"+i[a.XRANGEPLAIN]+"$",c("XRANGELOOSE"),i[a.XRANGELOOSE]="^"+i[a.GTLT]+"\\s*"+i[a.XRANGEPLAINLOOSE]+"$",c("COERCE"),i[a.COERCE]="(^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])",c("COERCERTL"),o[a.COERCERTL]=new RegExp(i[a.COERCE],"g"),c("LONETILDE"),i[a.LONETILDE]="(?:~>?)",c("TILDETRIM"),i[a.TILDETRIM]="(\\s*)"+i[a.LONETILDE]+"\\s+",o[a.TILDETRIM]=new RegExp(i[a.TILDETRIM],"g");c("TILDE"),i[a.TILDE]="^"+i[a.LONETILDE]+i[a.XRANGEPLAIN]+"$",c("TILDELOOSE"),i[a.TILDELOOSE]="^"+i[a.LONETILDE]+i[a.XRANGEPLAINLOOSE]+"$",c("LONECARET"),i[a.LONECARET]="(?:\\^)",c("CARETTRIM"),i[a.CARETTRIM]="(\\s*)"+i[a.LONECARET]+"\\s+",o[a.CARETTRIM]=new RegExp(i[a.CARETTRIM],"g");c("CARET"),i[a.CARET]="^"+i[a.LONECARET]+i[a.XRANGEPLAIN]+"$",c("CARETLOOSE"),i[a.CARETLOOSE]="^"+i[a.LONECARET]+i[a.XRANGEPLAINLOOSE]+"$",c("COMPARATORLOOSE"),i[a.COMPARATORLOOSE]="^"+i[a.GTLT]+"\\s*("+i[a.LOOSEPLAIN]+")$|^$",c("COMPARATOR"),i[a.COMPARATOR]="^"+i[a.GTLT]+"\\s*("+i[a.FULLPLAIN]+")$|^$",c("COMPARATORTRIM"),i[a.COMPARATORTRIM]="(\\s*)"+i[a.GTLT]+"\\s*("+i[a.LOOSEPLAIN]+"|"+i[a.XRANGEPLAIN]+")",o[a.COMPARATORTRIM]=new RegExp(i[a.COMPARATORTRIM],"g");c("HYPHENRANGE"),i[a.HYPHENRANGE]="^\\s*("+i[a.XRANGEPLAIN]+")\\s+-\\s+("+i[a.XRANGEPLAIN]+")\\s*$",c("HYPHENRANGELOOSE"),i[a.HYPHENRANGELOOSE]="^\\s*("+i[a.XRANGEPLAINLOOSE]+")\\s+-\\s+("+i[a.XRANGEPLAINLOOSE]+")\\s*$",c("STAR"),i[a.STAR]="(<|>)?=?\\s*\\*";for(var u=0;u<s;u++)r(u,i[u]),o[u]||(o[u]=new RegExp(i[u]));function l(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof d)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?o[a.LOOSE]:o[a.FULL]).test(e))return null;try{return new d(e,t)}catch(e){return null}}function d(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof d){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof d))return new d(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?o[a.LOOSE]:o[a.FULL]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}t.parse=l,t.valid=function(e,t){var r=l(e,t);return r?r.version:null},t.clean=function(e,t){var r=l(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=d,d.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},d.prototype.toString=function(){return this.version},d.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof d||(e=new d(e,this.options)),this.compareMain(e)||this.comparePre(e)},d.prototype.compareMain=function(e){return e instanceof d||(e=new d(e,this.options)),f(this.major,e.major)||f(this.minor,e.minor)||f(this.patch,e.patch)},d.prototype.comparePre=function(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return f(n,o)}while(++t)},d.prototype.compareBuild=function(e){e instanceof d||(e=new d(e,this.options));var t=0;do{var n=this.build[t],o=e.build[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return f(n,o)}while(++t)},d.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new d(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(g(e,t))return null;var r=l(e),n=l(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==n[a])return o+a;return i},t.compareIdentifiers=f;var p=/^[0-9]+$/;function f(e,t){var r=p.test(e),n=p.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function m(e,t,r){return new d(e,r).compare(new d(t,r))}function h(e,t,r){return m(e,t,r)>0}function E(e,t,r){return m(e,t,r)<0}function g(e,t,r){return 0===m(e,t,r)}function v(e,t,r){return 0!==m(e,t,r)}function I(e,t,r){return m(e,t,r)>=0}function y(e,t,r){return m(e,t,r)<=0}function R(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return g(e,r,n);case"!=":return v(e,r,n);case">":return h(e,r,n);case">=":return I(e,r,n);case"<":return E(e,r,n);case"<=":return y(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function w(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof w){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof w))return new w(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===S?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return f(t,e)},t.major=function(e,t){return new d(e,t).major},t.minor=function(e,t){return new d(e,t).minor},t.patch=function(e,t){return new d(e,t).patch},t.compare=m,t.compareLoose=function(e,t){return m(e,t,!0)},t.compareBuild=function(e,t,r){var n=new d(e,r),o=new d(t,r);return n.compare(o)||n.compareBuild(o)},t.rcompare=function(e,t,r){return m(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compareBuild(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.compareBuild(n,e,r)}))},t.gt=h,t.lt=E,t.eq=g,t.neq=v,t.gte=I,t.lte=y,t.cmp=R,t.Comparator=w;var S={};function b(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof b)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new b(e.raw,t);if(e instanceof w)return new b(e.value,t);if(!(this instanceof b))return new b(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function T(e,t){for(var r=!0,n=e.slice(),o=n.pop();r&&n.length;)r=n.every((function(e){return o.intersects(e,t)})),o=n.pop();return r}function O(e){return!e||"x"===e.toLowerCase()||"*"===e}function L(e,t,r,n,o,i,a,s,c,u,l,d,p){return((t=O(r)?"":O(n)?">="+r+".0.0":O(o)?">="+r+"."+n+".0":">="+t)+" "+(s=O(c)?"":O(u)?"<"+(+c+1)+".0.0":O(l)?"<"+c+"."+(+u+1)+".0":d?"<="+c+"."+u+"."+l+"-"+d:"<="+s)).trim()}function N(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==S&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function A(e,t,r){try{t=new b(t,r)}catch(e){return!1}return t.test(e)}function x(e,t,r,n){var o,i,a,s,c;switch(e=new d(e,n),t=new b(t,n),r){case">":o=h,i=y,a=E,s=">",c=">=";break;case"<":o=E,i=I,a=h,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(A(e,t,n))return!1;for(var u=0;u<t.set.length;++u){var l=t.set[u],p=null,f=null;if(l.forEach((function(e){e.semver===S&&(e=new w(">=0.0.0")),p=p||e,f=f||e,o(e.semver,p.semver,n)?p=e:a(e.semver,f.semver,n)&&(f=e)})),p.operator===s||p.operator===c)return!1;if((!f.operator||f.operator===s)&&i(e,f.semver))return!1;if(f.operator===c&&a(e,f.semver))return!1}return!0}w.prototype.parse=function(e){var t=this.options.loose?o[a.COMPARATORLOOSE]:o[a.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new d(r[2],this.options.loose):this.semver=S},w.prototype.toString=function(){return this.value},w.prototype.test=function(e){if(r("Comparator.test",e,this.options.loose),this.semver===S||e===S)return!0;if("string"==typeof e)try{e=new d(e,this.options)}catch(e){return!1}return R(e,this.operator,this.semver,this.options)},w.prototype.intersects=function(e,t){if(!(e instanceof w))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||(r=new b(e.value,t),A(this.value,r,t));if(""===e.operator)return""===e.value||(r=new b(this.value,t),A(e.semver,r,t));var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=R(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=R(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&a||s||c},t.Range=b,b.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},b.prototype.toString=function(){return this.range},b.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[a.HYPHENRANGELOOSE]:o[a.HYPHENRANGE];e=e.replace(n,L),r("hyphen replace",e),e=e.replace(o[a.COMPARATORTRIM],"$1$2$3"),r("comparator trim",e,o[a.COMPARATORTRIM]),e=(e=(e=e.replace(o[a.TILDETRIM],"$1~")).replace(o[a.CARETTRIM],"$1^")).split(/\s+/).join(" ");var i=t?o[a.COMPARATORLOOSE]:o[a.COMPARATOR],s=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[a.CARETLOOSE]:o[a.CARET];return e.replace(n,(function(t,n,o,i,a){var s;return r("caret",e,t,n,o,i,a),O(n)?s="":O(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":O(i)?s="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[a.TILDELOOSE]:o[a.TILDE];return e.replace(n,(function(t,n,o,i,a){var s;return r("tilde",e,t,n,o,i,a),O(n)?s="":O(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":O(i)?s=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0"):s=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[a.XRANGELOOSE]:o[a.XRANGE];return e.replace(n,(function(n,o,i,a,s,c){r("xRange",e,n,o,i,a,s,c);var u=O(i),l=u||O(a),d=l||O(s),p=d;return"="===o&&p&&(o=""),c=t.includePrerelease?"-0":"",u?n=">"===o||"<"===o?"<0.0.0-0":"*":o&&p?(l&&(a=0),s=0,">"===o?(o=">=",l?(i=+i+1,a=0,s=0):(a=+a+1,s=0)):"<="===o&&(o="<",l?i=+i+1:a=+a+1),n=o+i+"."+a+"."+s+c):l?n=">="+i+".0.0"+c+" <"+(+i+1)+".0.0"+c:d&&(n=">="+i+"."+a+".0"+c+" <"+i+"."+(+a+1)+".0"+c),r("xRange return",n),n}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[a.STAR],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter((function(e){return!!e.match(i)}))),s=s.map((function(e){return new w(e,this.options)}),this)},b.prototype.intersects=function(e,t){if(!(e instanceof b))throw new TypeError("a Range is required");return this.set.some((function(r){return T(r,t)&&e.set.some((function(e){return T(e,t)&&r.every((function(r){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new b(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},b.prototype.test=function(e){if(!e)return!1;if("string"==typeof e)try{e=new d(e,this.options)}catch(e){return!1}for(var t=0;t<this.set.length;t++)if(N(this.set[t],e,this.options))return!0;return!1},t.satisfies=A,t.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new b(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&-1!==o.compare(e)||(o=new d(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new b(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&1!==o.compare(e)||(o=new d(n=e,r)))})),n},t.minVersion=function(e,t){e=new b(e,t);var r=new d("0.0.0");if(e.test(r))return r;if(r=new d("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n){e.set[n].forEach((function(e){var t=new d(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!h(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}))}if(r&&e.test(r))return r;return null},t.validRange=function(e,t){try{return new b(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return x(e,t,"<",r)},t.gtr=function(e,t,r){return x(e,t,">",r)},t.outside=x,t.prerelease=function(e,t){var r=l(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new b(e,r),t=new b(t,r),e.intersects(t)},t.coerce=function(e,t){if(e instanceof d)return e;"number"==typeof e&&(e=String(e));if("string"!=typeof e)return null;var r=null;if((t=t||{}).rtl){for(var n;(n=o[a.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),o[a.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;o[a.COERCERTL].lastIndex=-1}else r=e.match(o[a.COERCE]);if(null===r)return null;return l(r[2]+"."+(r[3]||"0")+"."+(r[4]||"0"),t)}}));function Zt(e){T(e?"Hiding update indicator":"Showing update indicator"),document.querySelector("style#"+R)||document.head.insertAdjacentHTML("beforeend",'<style id="'+R+'"></style>'),document.querySelector("style#"+R).textContent="\n    .package-updates-status-view {\n      display: "+(e?"none !important;":"inline")+"\n     }\n  "}function Qt(){return v(this,void 0,void 0,(function(){var e,t=this;return I(this,(function(r){switch(r.label){case 0:if(!function(){var e=Math.floor((new Date).getTime()/1e3),t=(n=localStorage.getItem(R+".lastUpdateTime")||0,Math.floor(new Date(n).getTime()/1e3)),r=Number(N("intervalMinutes"));var n;if(60*r>=e-t)return T("Skipping update, will try again in "+Math.round((60*r-(e-t))/60)+" minutes"),!1;return!0}())return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,er()];case 2:return e=r.sent(),[3,4];case 3:return r.sent(),atom.notifications.addError("Could not retrieve outdated packages, see the console for details"),[2];case 4:return e.length?[4,Promise.allSettled(e.map((function(e){return v(t,void 0,void 0,(function(){return I(this,(function(t){switch(t.label){case 0:return[4,Jt(e)];case 1:return[2,t.sent()]}}))}))})))]:(T("No outdated packages found"),[2]);case 5:return function(e){var t=N().notifications;if(!t.notifyOnUpdate)return;var r=["Automatically updated"],n=e.slice(0,t.maximumPackageDetail).map((function(e){return"**"+e+"**"})),o=e.slice(t.maximumPackageDetail);e.length>t.maximumPackageDetail&&o.length&&n.push(o.length+" other "+(o.length>1?"packages":"package"));r.push(function(e){for(var t="",r=[],n=0;n<e.length;n++){var o=e[n];n>0&&(t+=n+1<e.length?", ":" and "),r.push(t+=o)}return t}(n)),atom.notifications.addSuccess(r.join(" "),{dismissable:!t.dismissNotification})}(r.sent().filter((function(e){return e})).map((function(e){return e.value}))),localStorage.setItem(R+".lastUpdateTime",(new Date).toISOString()),[2]}}))}))}function Jt(e){return v(this,void 0,void 0,(function(){var t,r;return I(this,(function(n){switch(n.label){case 0:t=atom.packages.getApmPath(),n.label=1;case 1:return n.trys.push([1,3,,4]),T("Updating '"+e+"'"),[4,zt(t,["update",e,"--no-confirm"])];case 2:return n.sent(),[3,4];case 3:throw n.sent(),b(r="Failed to install '"+e+"'"),Error(r);case 4:return[2,e]}}))}))}function er(){return v(this,void 0,void 0,(function(){var e,t,r,n,o,i,a;return I(this,(function(s){switch(s.label){case 0:T("Retrieving outdated packages"),e=atom.packages.getApmPath(),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,zt(e,["update","--compatible","--json","--list"])];case 2:return t=s.sent(),[3,4];case 3:throw r=s.sent(),Error(r.message);case 4:return n=JSON.parse(t.stdout).map((function(e){return{name:e.name,version:e.version,latestVersion:e.latestVersion}})).filter((function(e){return function(e){return N("versionRange").includes(((e,t)=>{if(e=Yt.parse(e),t=Yt.parse(t),!(Yt.compareBuild(e,t)>=0))return Yt.diff(e,t)||"build"})(e.version,e.latestVersion))}(e)}))||[],o=N(),i=o.includedPackages,a=o.excludedPackages,i.length?n=n.filter((function(e){return i.includes(e.name)})):a.length&&(n=n.filter((function(e){return!a.includes(e.name)}))),[2,n.map((function(e){return e.name}))]}}))}))}function tr(){var e=N(),t=e.includedPackages,r=e.excludedPackages;t.length&&r.length&&atom.notifications.addWarning("The `includedPackages` and `excludedPackages` settings are in conflict, you can only use one of them.",{dismissable:!0})}var rr={config:L,subscriptions:new e.CompositeDisposable,activate:function(){var e=this;T("Activating package");var t=N();t.hideUpdateStatusView&&Zt(!0),this.subscriptions.add(atom.config.observe(R+".includedPackages",tr),atom.config.observe(R+".excludedPackages",tr),atom.config.observe(R+".hideUpdateStatusView",Zt)),this.migrate(),T("Defering initialization by "+t.deferInitialization+" seconds"),setTimeout((function(){return v(e,void 0,void 0,(function(){return I(this,(function(e){switch(e.label){case 0:return[4,Qt()];case 1:return e.sent(),[2]}}))}))}),1e3*t.deferInitialization)},migrate:function(){var e;A("dismissNotification","notifications.dismissNotification"),A("maximumPackageDetail","notifications.maximumPackageDetail"),A("updateNotification","notifications.notifyOnUpdate"),void 0===(e="notificationStyle")&&(e=""),(null==e?void 0:e.length)?atom.config.unset(R+"."+e):atom.config.unset(""+R)},deactivate:function(){var e;T("Deactivating package"),null===(e=this.subscriptions)||void 0===e||e.dispose()}};module.exports=rr;
//# sourceMappingURL=index.js.map
